<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>èœå•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC",
                   "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background: #fafafa;
      color: #333;
      max-width: 480px;
      margin: 0 auto;
      padding: 24px 16px 60px;
    }

    h1 {
      font-size: 22px;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 14px;
      color: #777;
      margin-bottom: 24px;
    }

    .category {
      margin-bottom: 20px;
    }

    .category-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
      border-bottom: 1px solid #eee;
      padding-bottom: 4px;
    }

    .dish {
      border: 1px solid #eee;
      border-radius: 12px;
      padding: 14px 16px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .dish:hover {
      background: #f5f5f5;
    }

    .dish input {
      transform: scale(1.2);
    }

    .dish-info {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .dish-name {
      font-size: 16px;
      font-weight: 600;
    }

    .dish-risk {
      font-size: 13px;
      color: #666;
    }

    .note {
      margin-top: 20px;
    }

    .note label {
      font-size: 14px;
      display: block;
      margin-bottom: 6px;
    }

    .note textarea {
      width: 100%;
      min-height: 60px;
      padding: 8px 10px;
      font-size: 14px;
      border-radius: 8px;
      border: 1px solid #ddd;
      resize: vertical;
      box-sizing: border-box;
    }

    .actions {
      margin-top: 20px;
      text-align: center;
    }

    button {
      background: #111;
      color: #fff;
      border: none;
      border-radius: 20px;
      padding: 10px 20px;
      font-size: 14px;
      cursor: pointer;
    }

    .result {
      margin-top: 20px;
      font-size: 14px;
      white-space: pre-line;
    }

    .copied {
      margin-top: 8px;
      font-size: 13px;
      color: #4caf50;
    }
  </style>
</head>
<body>

  <h1>æ°§æ°”å®¶ä¸œåŒ—å®¶å¸¸èœ</h1>
  <div class="subtitle">ç‚¹ä½ æƒ³åƒçš„ï¼Œç¿»ä¸ç¿»è½¦éšç¼˜</div>

  <div id="dish-list"></div>

  <!-- å¤‡æ³¨è¾“å…¥ -->
  <div class="note">
    <label for="note">å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰</label>
    <textarea id="note" placeholder="æ¯”å¦‚ï¼šä¸åƒé¦™èœã€å°‘æ²¹ã€å¯¹èŠ±ç”Ÿè¿‡æ•"></textarea>
  </div>

  <div class="actions">
    <button onclick="submitOrder()">ç‚¹èœå¹¶å¤åˆ¶</button>
    <div id="result" class="result"></div>
    <div id="copied" class="copied"></div>
  </div>

  <script>
    // ========= èœå“æ•°æ® =========
    const menuData = {
      categories: [
        {
          id: "meat",
          name: "è¤èœ",
          items: [
            { id: "sweet_sour_ribs", name: "ç³–é†‹æ’éª¨", spicy: false, failRate: 2, ingredients: ["æ’éª¨", "ç³–", "é†‹", "é…±æ²¹"] },
            { id: "kung_pao_chicken", name: "å®«ä¿é¸¡ä¸", spicy: true, failRate: 3, ingredients: ["é¸¡èƒ¸è‚‰", "èŠ±ç”Ÿ", "å¹²è¾£æ¤’", "èŠ±æ¤’"] },
            { id: "cola_chicken_wings", name: "å¯ä¹é¸¡ç¿…", spicy: false, failRate: 2, ingredients: ["é¸¡ç¿…", "å¯ä¹", "é…±æ²¹", "å§œ"] },
            { id: "braised_pomfret", name: "çº¢çƒ§é²³é±¼", spicy: false, failRate: 3, ingredients: ["é²³é±¼", "é…±æ²¹", "è‘±", "å§œ"] },
            { id: "braised_pork", name: "çº¢çƒ§è‚‰", spicy: false, failRate: 3, ingredients: ["äº”èŠ±è‚‰", "å†°ç³–", "é…±æ²¹", "æ–™é…’"] },
            { id: "guobao_pork", name: "é”…åŒ…è‚‰", spicy: false, failRate: 4, ingredients: ["é‡Œè„Šè‚‰", "æ·€ç²‰", "ç³–", "é†‹"] },
            { id: "huangmen_chicken", name: "é»„ç„–é¸¡", spicy: true, failRate: 2, ingredients: ["é¸¡è…¿è‚‰", "åœŸè±†", "é’æ¤’", "é»„è±†é…±"] },
            { id: "farm_stir_fry_pork", name: "å†œå®¶å°ç‚’è‚‰", spicy: true, failRate: 2, ingredients: ["äº”èŠ±è‚‰", "è¾£æ¤’", "è’œè‹—"] },
            { id: "cumin_beef", name: "å­œç„¶ç‰›è‚‰", spicy: true, failRate: 3, ingredients: ["ç‰›è‚‰", "å­œç„¶", "æ´‹è‘±", "è¾£æ¤’"] },
            { id: "ribs_bean_stew", name: "æ’éª¨ç‚–è±†è§’", spicy: false, failRate: 2, ingredients: ["æ’éª¨", "è±†è§’", "åœŸè±†"] }
          ]
        },
        {
          id: "vegetable",
          name: "ç´ èœ",
          items: [
            { id: "blanched_lettuce", name: "ç™½ç¼ç”Ÿèœ", spicy: false, failRate: 1, ingredients: ["ç”Ÿèœ", "è’œ", "é…±æ²¹"] },
            { id: "vinegar_potato", name: "ææ°é†‹æºœåœŸè±†ä¸", spicy: false, failRate: 2, ingredients: ["åœŸè±†", "é†‹", "å¹²è¾£æ¤’"] },
            { id: "stir_fry_asparagus", name: "æ¸…ç‚’è´ç¬‹", spicy: false, failRate: 1, ingredients: ["è´ç¬‹", "è’œ"] },
            { id: "bok_choy", name: "æ¸…ç‚’å°ç™½èœ", spicy: false, failRate: 1, ingredients: ["å°ç™½èœ", "è’œ"] },
            { id: "romaine", name: "æ¸…ç‚’æ²¹éº¦èœ", spicy: false, failRate: 1, ingredients: ["æ²¹éº¦èœ", "è’œ"] },
            { id: "mushroom_bok_choy", name: "é¦™è‡æ²¹èœ", spicy: false, failRate: 2, ingredients: ["é¦™è‡", "æ²¹èœ"] },
            { id: "tomato_egg", name: "è¥¿çº¢æŸ¿ç‚’é¸¡è›‹", spicy: false, failRate: 1, ingredients: ["è¥¿çº¢æŸ¿", "é¸¡è›‹"] },
            { id: "sweet_sour_lotus", name: "ç³–é†‹è—•ç‰‡", spicy: false, failRate: 2, ingredients: ["è²è—•", "ç³–", "é†‹"] },
            { id: "di_san_xian", name: "åœ°ä¸‰é²œ", spicy: false, failRate: 3, ingredients: ["åœŸè±†", "èŒ„å­", "é’æ¤’"] }
          ]
        },
        {
          id: "drink",
          name: "é¥®æ–™",
          items: [
            { id: "coconut_water", name: "æ¤°å­æ°´", spicy: false, failRate: null, ingredients: ["æ¤°å­æ°´"] },
            { id: "orange_juice", name: "æ©™æ±", spicy: false, failRate: null, ingredients: ["æ©™æ±"] },
            { id: "cola", name: "å¯ä¹", spicy: false, failRate: null, ingredients: ["å¯ä¹"] }
          ]
        }
      ]
    };

    const dishList = document.getElementById("dish-list");
    const result = document.getElementById("result");
    const copied = document.getElementById("copied");
    const noteInput = document.getElementById("note");

    function renderStars(count) {
      return "â­".repeat(count);
    }

    // ========= æ¸²æŸ“åˆ†ç±»å’Œèœå“ =========
    menuData.categories.forEach(category => {
      const categoryDiv = document.createElement("div");
      categoryDiv.className = "category";

      const title = document.createElement("div");
      title.className = "category-title";
      title.innerText = category.name;
      categoryDiv.appendChild(title);

      category.items.forEach(dish => {
        const label = document.createElement("label");
        label.className = "dish";

        const spicyTag = dish.spicy ? " ğŸŒ¶ï¸" : "";
        const riskText = dish.failRate ? `ç¿»è½¦æ¦‚ç‡ï¼š${renderStars(dish.failRate)}` : "";

        label.innerHTML = `
          <input type="checkbox" value="${dish.name}${spicyTag}" />
          <div class="dish-info">
            <div class="dish-name">${dish.name}${spicyTag}</div>
            ${riskText ? `<div class="dish-risk">${riskText}</div>` : ""}
          </div>
        `;
        categoryDiv.appendChild(label);
      });

      dishList.appendChild(categoryDiv);
    });

    // ========= æäº¤å¹¶å¤åˆ¶ =========
    function submitOrder() {
      copied.innerText = "";

      const selected = [...dishList.querySelectorAll('input[type="checkbox"]:checked')]
        .map(cb => cb.value);

      if (selected.length === 0) {
        result.innerText = "ä½ è¿˜æ²¡ç‚¹èœå‘¢ ğŸ™‚";
        return;
      }

      let text = `æˆ‘ç‚¹äº†ï¼š\n- ${selected.join("\n- ")}`;

      const note = noteInput.value.trim();
      if (note) {
        text += `\n\nå¤‡æ³¨ï¼š\n${note}`;
      }

      result.innerText = text;

      navigator.clipboard.writeText(text).then(() => {
        copied.innerText = "å·²å¤åˆ¶ï¼Œå¯ä»¥ç›´æ¥å‘å¾®ä¿¡äº† ğŸ‘";
      }).catch(() => {
        copied.innerText = "å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶";
      });
    }
  </script>

</body>
</html>